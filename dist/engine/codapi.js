var t=window.codapi??{};t.version=typeof VERSION<"u"?VERSION:"main";t.engines=t.engines??{};t.settings=t.settings??{};window.codapi=t;var i=class extends HTMLElement{connectedCallback(){this.ready||(t.settings.url=this.getAttribute("url"),this.ready=!0)}attributeChangedCallback(e,o,n){t.settings[e]=n}};window.customElements.get("codapi-settings")||customElements.define("codapi-settings",i);async function r(s,e={}){let{timeout:o=1e4}=e,n=new AbortController,a=setTimeout(()=>n.abort(),o),c=await fetch(s,{...e,signal:n.signal});return clearTimeout(a),c}var d="https://api.codapi.org/v1",u="Something is wrong with Codapi.",l={400:"Bad request. Something is wrong with the request, not sure what.",404:"Unknown sandbox or command.",403:"Forbidden. Your domain is probably not allowed on Codapi.",413:"Request is too large. Try submitting less code.",429:"Too many requests. Try again in a few seconds."};async function m(s){try{let e=`${t.settings.url||d}/exec`,o=await r(e,{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let n=l[o.status]||u;return{ok:!1,duration:0,stdout:"",stderr:`${o.status} - ${n}`}}return await o.json()}catch(e){throw new Error("request failed",{cause:e})}}var h={init:()=>{},exec:m};export{h as default};
